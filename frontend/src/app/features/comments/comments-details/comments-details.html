<div class="comments-container">
  <!-- Comment Form -->
  @if (isPostOpen) {
  <app-comments-form [postId]="postId" (commentAdded)="loadComments()"></app-comments-form>
  } @else {
  <p class="closed-info">This post is closed. You cannot add new comments.</p>
  }

  <!-- Comment List -->
  <h3 class="section-title">Comments</h3>

  <div class="comment-list">
    @for (c of comments; track c) {
    <mat-card class="comment-card" appearance="outlined">
      <!-- Comment Header -->
      <div class="comment-header">
        <div class="comment-author">
          <div class="avatar-wrapper">
            <img [src]="c.authorAvatarUrl" alt="Avatar" class="avatar" />
          </div>
          <a [routerLink]="['/user', c.authorId]" class="author-link">
            {{ c.authorDisplayName }}
          </a>
        </div>
        <span class="comment-date">{{ c.createdAt | date : 'short' }}</span>
      </div>

      <!-- Comment Content -->
      <div class="comment-content">
        <p>{{ c.content }}</p>
      </div>
    </mat-card>
    }
  </div>
</div>
